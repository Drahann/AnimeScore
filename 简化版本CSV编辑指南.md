# 🎌 AnimeScore 简化版本CSV编辑指南

## 📋 概述

这个工具专门用于编辑AnimeScore生成的简化版本CSV文件，支持增删改查操作，并自动维护排名信息。

## 🚀 快速开始

### 方法1: 使用快速启动脚本
```bash
python edit_simple_csv.py
```

### 方法2: 直接运行管理器
```bash
python scripts/simple_csv_manager.py
```

## 📊 CSV文件格式

简化版本CSV包含以下列：
- **排名**: 综合排名
- **中文名**: 动漫中文名称
- **日文名**: 动漫日文名称  
- **综合评分**: 系统计算的综合评分
- **各网站数据**: 每个网站包含3列
  - `网站名_评分`: 该网站的评分
  - `网站名_投票数`: 该网站的投票数
  - `网站名_排名`: 该网站的排名

支持的网站：ANILIST, FILMARKS, IMDB, MAL

## 🛠️ 功能说明

### 1. 📋 查看动漫列表
- 分页显示所有动漫
- 显示排名、中文名、日文名、综合评分
- 支持上下页导航

### 2. 🔍 搜索动漫
- 支持中文名和日文名搜索
- 模糊匹配，不区分大小写
- 显示所有匹配结果

### 3. ➕ 添加动漫
- 交互式输入动漫信息
- 必填：中文名、综合评分
- 可选：日文名、各网站评分数据
- 自动重新计算排名

### 4. ✏️ 编辑动漫
- 搜索并选择要编辑的动漫
- 可修改所有字段
- 按回车保持原值不变
- 自动重新计算排名

### 5. 🗑️ 删除动漫
- 搜索并选择要删除的动漫
- 确认删除操作
- 自动重新计算排名

### 6. 💾 保存功能
- 自动创建备份文件
- 生成带时间戳的新文件
- 可选择是否覆盖原文件

## 🔧 高级功能

### 自动排名计算
- **综合排名**: 按综合评分降序排列
- **网站排名**: 按各网站评分降序排列
- **智能处理**: 自动跳过空值和无效数据

### 数据验证
- 评分数据类型检查
- 自动补齐缺失列
- 保持数据格式一致性

### 备份机制
- 编辑前自动创建 `.backup.csv` 备份
- 保存时生成带时间戳的新文件
- 可选择覆盖原文件

## 📝 使用示例

### 添加新动漫
```
中文名: 我的新动漫
日文名: 私の新しいアニメ
综合评分: 8.5

--- ANILIST 数据 ---
ANILIST_评分: 8.2
ANILIST_投票数: 1500
ANILIST_排名: (留空，自动计算)

--- FILMARKS 数据 ---
FILMARKS_评分: 8.0
FILMARKS_投票数: 800
FILMARKS_排名: (留空，自动计算)
```

### 搜索动漫
```
请输入搜索关键词: 鬼滅
```
会找到所有包含"鬼滅"的动漫。

### 编辑动漫
```
请输入要编辑的动漫名称关键词: Takopii
选择要编辑的动漫: 1

编辑动漫: Takopii no Genzai
提示: 直接按回车保持原值不变

中文名 [Takopii no Genzai]: 章鱼哥的原罪
日文名 [タコピーの原罪]: (按回车保持不变)
综合评分 [1.906]: 2.0
```

## ⚠️ 注意事项

1. **备份重要**: 编辑前会自动创建备份，建议保留
2. **数据格式**: 评分必须是数字，投票数必须是整数
3. **排名自动**: 排名会自动重新计算，手动输入的排名会被覆盖
4. **文件编码**: 使用UTF-8编码，支持中文字符
5. **Excel兼容**: 生成的CSV可以在Excel中正常打开

## 🐛 故障排除

### 找不到CSV文件
- 确保 `data/results/` 目录存在
- 确保有 `*simple.csv` 格式的文件
- 检查文件权限

### 编码问题
- 确保系统支持UTF-8编码
- 在Excel中打开时选择UTF-8编码

### 数据格式错误
- 检查评分是否为有效数字
- 检查投票数是否为整数
- 确保必填字段不为空

## 📞 技术支持

如果遇到问题，请检查：
1. Python环境是否正确
2. 文件路径是否正确
3. 数据格式是否符合要求
4. 是否有足够的磁盘空间

---

🎌 **AnimeScore Team** - 让动漫评分更简单！
